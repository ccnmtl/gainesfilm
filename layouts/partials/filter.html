<script src="/js/lib/underscore.min.js"></script>
<script src="/js/src/filter.js"></script>

<div class="well" id="filter">

    <form class="form form-inline" onsubmit="return false">

        <input type="text" name="filter-q" id="filter-q" placeholder="I'm looking for..." class="form-control"/>
        
        <select name="category" class="form-control" id="filter-category">
            <option value="" selected="selected">All Categories</option>
        </select>

        <select name="course" class="form-control" id="filter-course">
            <option value="" selected="selected">All Courses</option>            
        </select>

        <select name="media" class="form-control" id="filter-media">
            <option value="" selected="selected">All Media</option>
        </select>
        
    </form>
    
</div>

<script id="filter-results-template" type="text/template">
    <div class="arrow"></div>
    <% if (results.length === 0) { %>
    <div class="alert alert-danger q-no-item">
        Unfortunately, there are no results matching what you're looking for.
    </div>
    <% } else { %>
    <table class="table table-striped table-condensed">
        <colgroup>
            <col style="width: 55%;">
            <col style="width: 5%;">
            <col style="width: 20%;">
            <col style="width: 10%;">
            <col style="width: 10%;">
        </colgroup>

        <thead>
            <tr>
                <th>Title</th>
                <th>Year</th>
                <th>Category</th>
                <th>Course</th>
                <th>Media</th>
            </tr>
        </thead>
        <tbody>
            <% _.each(results, function(result){ %>
            <tr>
                <th><a href="<%= result.url %>"><%= result.unquotedTitle %></a></th>
                <td>
                    <a href="/years/<%= result.year %>/"><%= result.year %></a>
                </td>
                <td>
                    <a href="<%= result.category_link %>"><%= result.category %></a>
                </td>
                <td>
                    <a href="<%= result.course_link %>"><%= result.course %></a>
                </td>
                <td>
                    <a href="/media/<%= result.media %>/"><%= result.media %></a>
                </td>
            </tr>

        <% }); %>

        </tbody>
    </table>
    <% } %>
</script>
